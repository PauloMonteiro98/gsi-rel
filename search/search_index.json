{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"dns/registros-a/","text":"O samba-tool \u00e9 utilizado para gerenciar v\u00e1rios aspectos de um servidor Samba, incluindo registros DNS. O comando samba-tool dns permite manipular registros DNS dentro de uma zona gerenciada pelo Samba como controlador de dom\u00ednio (AD). Os registros do tipo A associam um nome de host a um endere\u00e7o IP IPv4. No exemplo a seguir, vamos simular a cria\u00e7\u00e3o de 4 registros de DNS do tipo A, com nomes de cidades mineiras pouco conhecidas, e listar todos os registros da zona. Passo a Passo Comando para criar registros DNS do tipo A: samba-tool dns add <servidor-dns> <zona> <nome> A <ip> -U <usu\u00e1rio> <servidor-dns> : IP ou nome do servidor DNS (geralmente 127.0.0.1 para o servidor local). <zona> : Nome da zona DNS (exemplo: minasgerais.lab ). <nome> : Nome do host que voc\u00ea quer associar a um IP (exemplo: uma cidade). A : Especifica que o tipo de registro \u00e9 A (IPv4). <ip> : O endere\u00e7o IP associado ao nome. -U <usu\u00e1rio> : Usu\u00e1rio autorizado (geralmente administrator ). Comando para listar registros DNS da zona: samba-tool dns query 127.0.0.1 \"minasgerais.lab\" @ ALL -U administrator Esse comando consulta todos os registros da zona minasgerais.lab . Exemplo de Simula\u00e7\u00e3o no Terminal Aqui est\u00e1 uma simula\u00e7\u00e3o com cidades pouco conhecidas de Minas Gerais (como Itamarandiba , Passa Vinte , Aracitaba , Caputira ) e seus IPs fict\u00edcios. 1. Criar o registro DNS para Itamarandiba $ samba-tool dns add 127.0.0.1 minasgerais.lab itamarandiba A 192.168.10.10 -U administrator Password for [administrator]: Record added successfully 2. Criar o registro DNS para Passa Vinte $ samba-tool dns add 127.0.0.1 minasgerais.lab passavinte A 192.168.10.20 -U administrator Password for [administrator]: Record added successfully 3. Criar o registro DNS para Aracitaba $ samba-tool dns add 127.0.0.1 minasgerais.lab aracitaba A 192.168.10.30 -U administrator Password for [administrator]: Record added successfully 4. Criar o registro DNS para Caputira $ samba-tool dns add 127.0.0.1 minasgerais.lab caputira A 192.168.10.40 -U administrator Password for [administrator]: Record added successfully Listar todos os registros da zona minasgerais.lab Agora, para listar todos os registros da zona minasgerais.lab , usamos o seguinte comando: $ samba-tool dns query 127.0.0.1 \"minasgerais.lab\" @ ALL -U administrator Password for [administrator]: Name=, Records=0, Children=4 A: itamarandiba, Address=192.168.10.10, Flags=600000f0 [DOMAIN_ENTRY, CACHE_ENTRY] A: passavinte, Address=192.168.10.20, Flags=600000f0 [DOMAIN_ENTRY, CACHE_ENTRY] A: aracitaba, Address=192.168.10.30, Flags=600000f0 [DOMAIN_ENTRY, CACHE_ENTRY] A: caputira, Address=192.168.10.40, Flags=600000f0 [DOMAIN_ENTRY, CACHE_ENTRY] Conclus\u00e3o Simulamos a cria\u00e7\u00e3o de quatro registros DNS do tipo A utilizando o samba-tool e, em seguida, listamos todos os registros na zona minasgerais.lab . Esse processo pode ser repetido para adicionar mais registros conforme necess\u00e1rio no seu ambiente de DNS controlado pelo Samba.","title":"Registros"},{"location":"dns/registros-a/#passo-a-passo","text":"","title":"Passo a Passo"},{"location":"dns/registros-a/#comando-para-criar-registros-dns-do-tipo-a","text":"samba-tool dns add <servidor-dns> <zona> <nome> A <ip> -U <usu\u00e1rio> <servidor-dns> : IP ou nome do servidor DNS (geralmente 127.0.0.1 para o servidor local). <zona> : Nome da zona DNS (exemplo: minasgerais.lab ). <nome> : Nome do host que voc\u00ea quer associar a um IP (exemplo: uma cidade). A : Especifica que o tipo de registro \u00e9 A (IPv4). <ip> : O endere\u00e7o IP associado ao nome. -U <usu\u00e1rio> : Usu\u00e1rio autorizado (geralmente administrator ).","title":"Comando para criar registros DNS do tipo A:"},{"location":"dns/registros-a/#comando-para-listar-registros-dns-da-zona","text":"samba-tool dns query 127.0.0.1 \"minasgerais.lab\" @ ALL -U administrator Esse comando consulta todos os registros da zona minasgerais.lab .","title":"Comando para listar registros DNS da zona:"},{"location":"dns/registros-a/#exemplo-de-simulacao-no-terminal","text":"Aqui est\u00e1 uma simula\u00e7\u00e3o com cidades pouco conhecidas de Minas Gerais (como Itamarandiba , Passa Vinte , Aracitaba , Caputira ) e seus IPs fict\u00edcios.","title":"Exemplo de Simula\u00e7\u00e3o no Terminal"},{"location":"dns/registros-a/#1-criar-o-registro-dns-para-itamarandiba","text":"$ samba-tool dns add 127.0.0.1 minasgerais.lab itamarandiba A 192.168.10.10 -U administrator Password for [administrator]: Record added successfully","title":"1. Criar o registro DNS para Itamarandiba"},{"location":"dns/registros-a/#2-criar-o-registro-dns-para-passa-vinte","text":"$ samba-tool dns add 127.0.0.1 minasgerais.lab passavinte A 192.168.10.20 -U administrator Password for [administrator]: Record added successfully","title":"2. Criar o registro DNS para Passa Vinte"},{"location":"dns/registros-a/#3-criar-o-registro-dns-para-aracitaba","text":"$ samba-tool dns add 127.0.0.1 minasgerais.lab aracitaba A 192.168.10.30 -U administrator Password for [administrator]: Record added successfully","title":"3. Criar o registro DNS para Aracitaba"},{"location":"dns/registros-a/#4-criar-o-registro-dns-para-caputira","text":"$ samba-tool dns add 127.0.0.1 minasgerais.lab caputira A 192.168.10.40 -U administrator Password for [administrator]: Record added successfully","title":"4. Criar o registro DNS para Caputira"},{"location":"dns/registros-a/#listar-todos-os-registros-da-zona-minasgeraislab","text":"Agora, para listar todos os registros da zona minasgerais.lab , usamos o seguinte comando: $ samba-tool dns query 127.0.0.1 \"minasgerais.lab\" @ ALL -U administrator Password for [administrator]: Name=, Records=0, Children=4 A: itamarandiba, Address=192.168.10.10, Flags=600000f0 [DOMAIN_ENTRY, CACHE_ENTRY] A: passavinte, Address=192.168.10.20, Flags=600000f0 [DOMAIN_ENTRY, CACHE_ENTRY] A: aracitaba, Address=192.168.10.30, Flags=600000f0 [DOMAIN_ENTRY, CACHE_ENTRY] A: caputira, Address=192.168.10.40, Flags=600000f0 [DOMAIN_ENTRY, CACHE_ENTRY]","title":"Listar todos os registros da zona minasgerais.lab"},{"location":"dns/registros-a/#conclusao","text":"Simulamos a cria\u00e7\u00e3o de quatro registros DNS do tipo A utilizando o samba-tool e, em seguida, listamos todos os registros na zona minasgerais.lab . Esse processo pode ser repetido para adicionar mais registros conforme necess\u00e1rio no seu ambiente de DNS controlado pelo Samba.","title":"Conclus\u00e3o"},{"location":"ldap/dn-ifrn/","text":"","title":"DN"},{"location":"samba/instalacao/","text":"Configurando o Samba como Controlador de Dom\u00ednio no Alpine Linux Este guia cobre a instala\u00e7\u00e3o e configura\u00e7\u00e3o do Samba para atuar como um controlador de dom\u00ednio do Active Directory no Alpine Linux. Requisitos Alpine Linux instalado e atualizado. Acesso root ou privil\u00e9gios sudo . Conectividade de rede adequada. Passo 1: Atualizar os pacotes Antes de iniciar, atualize os pacotes do sistema: apk update apk upgrade Passo 2: Instalar o Samba e Depend\u00eancias Instale o Samba e as depend\u00eancias necess\u00e1rias para configur\u00e1-lo como controlador de dom\u00ednio do AD: apk add samba samba-dc samba-winbind krb5 krb5-server krb5-libs krb5-client openldap-clients Passo 3: Configurar o Kerberos O Samba como controlador de dom\u00ednio AD requer a configura\u00e7\u00e3o do Kerberos. Edite o arquivo /etc/krb5.conf : [libdefaults] default_realm = EXEMPLO.COM dns_lookup_realm = false dns_lookup_kdc = true [realms] EXEMPLO.COM = { kdc = dc.exemplo.com admin_server = dc.exemplo.com } [domain_realm] .exemplo.com = EXEMPLO.COM exemplo.com = EXEMPLO.COM Substitua EXEMPLO.COM pelo nome do seu dom\u00ednio. Passo 4: Provisionar o Controlador de Dom\u00ednio Antes de iniciar o Samba como um controlador de dom\u00ednio, voc\u00ea precisa provision\u00e1-lo com o comando samba-tool . Isso configura o Samba como um Controlador de Dom\u00ednio (DC) do AD. Execute o seguinte comando: samba-tool domain provision --use-rfc2307 --interactive Durante o provisionamento, voc\u00ea ser\u00e1 solicitado a fornecer v\u00e1rias informa\u00e7\u00f5es: Realm : O nome do dom\u00ednio, como EXEMPLO.COM . Domain : O nome do dom\u00ednio, como EXEMPLO . Administrator password : Defina a senha para o usu\u00e1rio Administrator . Se preferir executar o provisionamento sem intera\u00e7\u00e3o, voc\u00ea pode fornecer todas as op\u00e7\u00f5es de uma vez: samba-tool domain provision \\ --realm=EXEMPLO.COM \\ --domain=EXEMPLO \\ --adminpass=SuaSenhaForte \\ --server-role=dc \\ --use-rfc2307 Explica\u00e7\u00e3o das op\u00e7\u00f5es: --realm : O nome completo do dom\u00ednio no formato EXEMPLO.COM . --domain : O nome curto do dom\u00ednio. --adminpass : A senha para o administrador do dom\u00ednio. --server-role : Define o Samba como controlador de dom\u00ednio ( dc ). --use-rfc2307 : Ativa o suporte para esquemas Unix em AD (RFC2307). Passo 5: Configurar DNS O Samba pode atuar como servidor DNS. Para habilitar o DNS, edite o arquivo /etc/samba/smb.conf , que foi gerado automaticamente durante o provisionamento. O arquivo deve conter as seguintes configura\u00e7\u00f5es: [global] workgroup = EXEMPLO realm = EXEMPLO.COM netbios name = DC1 server role = active directory domain controller dns forwarder = 8.8.8.8 [sysvol] path = /var/lib/samba/sysvol read only = no [netlogon] path = /var/lib/samba/sysvol/exemplo.com/scripts read only = no A op\u00e7\u00e3o dns forwarder define o encaminhador de DNS. No exemplo, estamos utilizando o DNS p\u00fablico do Google ( 8.8.8.8 ), mas voc\u00ea pode substituir por outro de sua escolha. Passo 6: Iniciar o Samba Agora, inicie o Samba como controlador de dom\u00ednio: rc-service samba start Para garantir que o Samba e os servi\u00e7os relacionados sejam iniciados automaticamente na inicializa\u00e7\u00e3o do sistema: rc-update add samba Passo 7: Testar a Configura\u00e7\u00e3o do Samba Verifique se o Samba est\u00e1 funcionando corretamente: samba-tool dns query localhost exemplo.com @ ALL Esse comando deve retornar todas as zonas DNS configuradas. Tamb\u00e9m \u00e9 uma boa pr\u00e1tica verificar se os servi\u00e7os smbd , nmbd e winbind est\u00e3o rodando: rc-service samba status Passo 8: Verificar o DNS Verifique se o servidor DNS est\u00e1 funcionando corretamente. Voc\u00ea pode testar a resolu\u00e7\u00e3o de nomes com o nslookup : nslookup dc1.exemplo.com Passo 9: Configurar as Regras de Firewall (Opcional) Se voc\u00ea estiver usando um firewall, certifique-se de que as portas usadas pelo Samba est\u00e3o abertas. As principais portas s\u00e3o: TCP/UDP 53 : DNS TCP/UDP 88 : Kerberos TCP/UDP 135 : RPC TCP/UDP 139 e 445 : SMB UDP 389 : LDAP TCP/UDP 464 : Kerberos password changes TCP 636 : LDAP sobre SSL (LDAPS) Passo 10: Conectar um Cliente ao Controlador de Dom\u00ednio Agora que o Samba est\u00e1 configurado como controlador de dom\u00ednio, voc\u00ea pode conectar um cliente Windows ao dom\u00ednio. Siga estas etapas em um cliente Windows: Abra o \"Painel de Controle\". V\u00e1 em \"Sistema e Seguran\u00e7a\" > \"Sistema\". Clique em \"Alterar configura\u00e7\u00f5es\" em \"Nome do computador, dom\u00ednio e configura\u00e7\u00f5es de grupo de trabalho\". Clique em \"Alterar\". Selecione \"Dom\u00ednio\" e insira o nome do dom\u00ednio (por exemplo, EXEMPLO ). Insira as credenciais do administrador do Samba quando solicitado. Conclus\u00e3o Voc\u00ea configurou o Samba no Alpine Linux como um controlador de dom\u00ednio do Active Directory. A partir daqui, voc\u00ea pode gerenciar seu dom\u00ednio, adicionar m\u00e1quinas e configurar permiss\u00f5es conforme necess\u00e1rio.","title":"Instala\u00e7\u00e3o"},{"location":"samba/instalacao/#configurando-o-samba-como-controlador-de-dominio-no-alpine-linux","text":"Este guia cobre a instala\u00e7\u00e3o e configura\u00e7\u00e3o do Samba para atuar como um controlador de dom\u00ednio do Active Directory no Alpine Linux.","title":"Configurando o Samba como Controlador de Dom\u00ednio no Alpine Linux"},{"location":"samba/instalacao/#requisitos","text":"Alpine Linux instalado e atualizado. Acesso root ou privil\u00e9gios sudo . Conectividade de rede adequada.","title":"Requisitos"},{"location":"samba/instalacao/#passo-1-atualizar-os-pacotes","text":"Antes de iniciar, atualize os pacotes do sistema: apk update apk upgrade","title":"Passo 1: Atualizar os pacotes"},{"location":"samba/instalacao/#passo-2-instalar-o-samba-e-dependencias","text":"Instale o Samba e as depend\u00eancias necess\u00e1rias para configur\u00e1-lo como controlador de dom\u00ednio do AD: apk add samba samba-dc samba-winbind krb5 krb5-server krb5-libs krb5-client openldap-clients","title":"Passo 2: Instalar o Samba e Depend\u00eancias"},{"location":"samba/instalacao/#passo-3-configurar-o-kerberos","text":"O Samba como controlador de dom\u00ednio AD requer a configura\u00e7\u00e3o do Kerberos. Edite o arquivo /etc/krb5.conf : [libdefaults] default_realm = EXEMPLO.COM dns_lookup_realm = false dns_lookup_kdc = true [realms] EXEMPLO.COM = { kdc = dc.exemplo.com admin_server = dc.exemplo.com } [domain_realm] .exemplo.com = EXEMPLO.COM exemplo.com = EXEMPLO.COM Substitua EXEMPLO.COM pelo nome do seu dom\u00ednio.","title":"Passo 3: Configurar o Kerberos"},{"location":"samba/instalacao/#passo-4-provisionar-o-controlador-de-dominio","text":"Antes de iniciar o Samba como um controlador de dom\u00ednio, voc\u00ea precisa provision\u00e1-lo com o comando samba-tool . Isso configura o Samba como um Controlador de Dom\u00ednio (DC) do AD. Execute o seguinte comando: samba-tool domain provision --use-rfc2307 --interactive Durante o provisionamento, voc\u00ea ser\u00e1 solicitado a fornecer v\u00e1rias informa\u00e7\u00f5es: Realm : O nome do dom\u00ednio, como EXEMPLO.COM . Domain : O nome do dom\u00ednio, como EXEMPLO . Administrator password : Defina a senha para o usu\u00e1rio Administrator . Se preferir executar o provisionamento sem intera\u00e7\u00e3o, voc\u00ea pode fornecer todas as op\u00e7\u00f5es de uma vez: samba-tool domain provision \\ --realm=EXEMPLO.COM \\ --domain=EXEMPLO \\ --adminpass=SuaSenhaForte \\ --server-role=dc \\ --use-rfc2307","title":"Passo 4: Provisionar o Controlador de Dom\u00ednio"},{"location":"samba/instalacao/#explicacao-das-opcoes","text":"--realm : O nome completo do dom\u00ednio no formato EXEMPLO.COM . --domain : O nome curto do dom\u00ednio. --adminpass : A senha para o administrador do dom\u00ednio. --server-role : Define o Samba como controlador de dom\u00ednio ( dc ). --use-rfc2307 : Ativa o suporte para esquemas Unix em AD (RFC2307).","title":"Explica\u00e7\u00e3o das op\u00e7\u00f5es:"},{"location":"samba/instalacao/#passo-5-configurar-dns","text":"O Samba pode atuar como servidor DNS. Para habilitar o DNS, edite o arquivo /etc/samba/smb.conf , que foi gerado automaticamente durante o provisionamento. O arquivo deve conter as seguintes configura\u00e7\u00f5es: [global] workgroup = EXEMPLO realm = EXEMPLO.COM netbios name = DC1 server role = active directory domain controller dns forwarder = 8.8.8.8 [sysvol] path = /var/lib/samba/sysvol read only = no [netlogon] path = /var/lib/samba/sysvol/exemplo.com/scripts read only = no A op\u00e7\u00e3o dns forwarder define o encaminhador de DNS. No exemplo, estamos utilizando o DNS p\u00fablico do Google ( 8.8.8.8 ), mas voc\u00ea pode substituir por outro de sua escolha.","title":"Passo 5: Configurar DNS"},{"location":"samba/instalacao/#passo-6-iniciar-o-samba","text":"Agora, inicie o Samba como controlador de dom\u00ednio: rc-service samba start Para garantir que o Samba e os servi\u00e7os relacionados sejam iniciados automaticamente na inicializa\u00e7\u00e3o do sistema: rc-update add samba","title":"Passo 6: Iniciar o Samba"},{"location":"samba/instalacao/#passo-7-testar-a-configuracao-do-samba","text":"Verifique se o Samba est\u00e1 funcionando corretamente: samba-tool dns query localhost exemplo.com @ ALL Esse comando deve retornar todas as zonas DNS configuradas. Tamb\u00e9m \u00e9 uma boa pr\u00e1tica verificar se os servi\u00e7os smbd , nmbd e winbind est\u00e3o rodando: rc-service samba status","title":"Passo 7: Testar a Configura\u00e7\u00e3o do Samba"},{"location":"samba/instalacao/#passo-8-verificar-o-dns","text":"Verifique se o servidor DNS est\u00e1 funcionando corretamente. Voc\u00ea pode testar a resolu\u00e7\u00e3o de nomes com o nslookup : nslookup dc1.exemplo.com","title":"Passo 8: Verificar o DNS"},{"location":"samba/instalacao/#passo-9-configurar-as-regras-de-firewall-opcional","text":"Se voc\u00ea estiver usando um firewall, certifique-se de que as portas usadas pelo Samba est\u00e3o abertas. As principais portas s\u00e3o: TCP/UDP 53 : DNS TCP/UDP 88 : Kerberos TCP/UDP 135 : RPC TCP/UDP 139 e 445 : SMB UDP 389 : LDAP TCP/UDP 464 : Kerberos password changes TCP 636 : LDAP sobre SSL (LDAPS)","title":"Passo 9: Configurar as Regras de Firewall (Opcional)"},{"location":"samba/instalacao/#passo-10-conectar-um-cliente-ao-controlador-de-dominio","text":"Agora que o Samba est\u00e1 configurado como controlador de dom\u00ednio, voc\u00ea pode conectar um cliente Windows ao dom\u00ednio. Siga estas etapas em um cliente Windows: Abra o \"Painel de Controle\". V\u00e1 em \"Sistema e Seguran\u00e7a\" > \"Sistema\". Clique em \"Alterar configura\u00e7\u00f5es\" em \"Nome do computador, dom\u00ednio e configura\u00e7\u00f5es de grupo de trabalho\". Clique em \"Alterar\". Selecione \"Dom\u00ednio\" e insira o nome do dom\u00ednio (por exemplo, EXEMPLO ). Insira as credenciais do administrador do Samba quando solicitado.","title":"Passo 10: Conectar um Cliente ao Controlador de Dom\u00ednio"},{"location":"samba/instalacao/#conclusao","text":"Voc\u00ea configurou o Samba no Alpine Linux como um controlador de dom\u00ednio do Active Directory. A partir daqui, voc\u00ea pode gerenciar seu dom\u00ednio, adicionar m\u00e1quinas e configurar permiss\u00f5es conforme necess\u00e1rio.","title":"Conclus\u00e3o"}]}